function CheckCCNum(a,b,c){var d="",e=!0;a=a.replace(/-/g,"").replace(/ /g,"");for(var f=0;f<a.length;f++)"0"==a.charAt(f)||"1"==a.charAt(f)||"2"==a.charAt(f)||"3"==a.charAt(f)||"4"==a.charAt(f)||"5"==a.charAt(f)||"6"==a.charAt(f)||"7"==a.charAt(f)||"8"==a.charAt(f)||"9"==a.charAt(f)?d+=a.charAt(f):e=!1;if(!checkPrefix(a,b))return!c&&alert("We're sorry, that credit card number is invalid.  Please check the number and try again."),e=!1,!1;for(var g=0,h=1;h<=d.length;h++){var i=d.charAt(d.length-h);if(h%2==0){var j=2*i;j>9?(g+=1,g+=j%10):g+=j-0}else g+=i-0}return g%10&&(e=!1),e||c||alert("We're sorry, that credit card number is invalid.  Please check the number and try again."),e}function chkCCExpiresIn60Days(a,b){var c=!0,d=new Date,e=new Date(d.getYear(),d.getMonth(),d.getDate()),f=new Date(b,a,"01");return f=addMonthsToDate(f,-2),f<e&&(alert("Warning: this card expires < 60 days from today."),c=!0),c}function addMonthsToDate(a,b){var c=Math.floor(b/12),d=b-12*c,e=a.getMonth()+d;a.getMonth()+d>11&&(++c,e=a.getMonth()+d-12);for(var f=new Date(a.getYear()+c,e,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());f.getMonth()!=e;)f=addDaysToDate(f,-1);return f}function checkPrefix(a,b){var c,d,e,f,g,h,i,j;d=a.toString(),c=d.length,i=!1,j=null!=b&&"object"==typeof b,e=d.substr(0,1),f=d.substr(0,2),g=d.substr(0,3),h=d.substr(0,4);var k=new RegExp("(5[0-6|8])"),l=new RegExp("(30[0-5|9])"),m=new RegExp("(3[6|8|9])"),n=new RegExp("(3[4|7])"),o=new RegExp("(6((011)|(759)|[4-5][4-9][0-9]|22[1-9]|2[4-6][0-9]|28[2-8]))"),p=new RegExp("(6((304)|(706)|(709)))");switch(e){case"3":15==c?(logit("checking amex -- 15 digits, test first two"),i=n.test(f),j&&(i=i&&b.ccAmericanExpress)):14==c?(logit("checking Diner's and Carte Blanche -- 14 digits, test first two and first three"),i=l.test(g)||m.test(f),j&&(i=i&&b.ccMasterCard)):16==c&&(logit("JCB check -- all we're looking for is 16 digits"),i=!0,j&&(i=i&&b.ccDiscover));break;case"4":16==c&&(logit("Visa check -- all we're looking for is 16 digits"),i=!0,j&&(i=i&&b.ccVisa));break;case"5":16==c&&(logit("MC / Maestro check, 16 digits and first two"),i=k.test(f),j&&(i=i&&b.ccMasterCard));break;case"6":16==c?(logit("Dicover check, 16 digits and first four"),i=o.test(h),i||(logit("16 digit Disco failed, check for laser card"),i=p.test(h)),j&&(i=i&&b.ccDiscover)):c<=19&&c>=16&&(logit("Laser card check, 16-19 digits and first four"),i=p.test(h),j&&(i=i&&b.ccDiscover));break;default:i=!1}return i}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function logit(a){vcc2_DEBUG&&console.log(a)}var vcc2_DEBUG=!1;